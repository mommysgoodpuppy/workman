-- The 'async' domain tells the compiler this behaves like a Promise
-- @value: The resolved value (T)
-- @effect: The rejection reason (E)
export infectious async type Promise<T, E> = 
    | @value Resolved<T>
    | @effect Rejected<E>;

-- Helper to create a resolved promise
export let resolve = (val: T) => {Resolved(val)};

-- Helper to create a rejected promise
export let reject = (err: E) => {Rejected(err)};
