infectious error type Tainted<T, E> = 
| @value Pure<T> 
| @effect Impure<E>;

let fun = () => {
  match(true) {
    true => {Impure(1)},
    false => {Impure(2)}
  }
};

let fun2 = (in:Int) => {
  match(true) {
    true => {Pure(in)},
    false =>{Impure(2)}
  }
};

let puref = (in) => {
  1 + in
};

let main = () => {
  let a = fun();
  let checd = match(a) {
    Pure(a) => {a},
    Impure(_)=> {2}
  };
  let res = puref(checd);

  let a = fun();
  let x = fun2(a);
  print(x)
};
